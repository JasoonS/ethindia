{"version":3,"sources":["web3ProvideSwitcher.ts","components/TokenIdContext.tsx","components/throttledDrizzelConnect.js","components/ContractData.tsx","components/USDPriceContext.tsx","components/TokenOverview.tsx","components/Offline.js","components/BuyModal.tsx","lib/ipfs.js","components/UpdateModal.tsx","components/UploadImage.js","components/Dapp.tsx","components/About.js","components/HowItworks.js","components/PreloadedImageContext.tsx","components/Template.tsx","App.js","index.tsx"],"names":["getInjectedWeb3","_ref","Object","_home_jasoons_Documents_india_hackathon_ethindia_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_home_jasoons_Documents_india_hackathon_ethindia_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee","_window","ethereum","currentProvider","wrap","_context","prev","next","window","enable","abrupt","provider","providerInjected","t0","web3","Error","stop","apply","this","arguments","getInjectedWeb3NoLoad","error","console","log","Web3","providers","WebsocketProvider","Web3ProviderSwitcher","_home_jasoons_Documents_india_hackathon_ethindia_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","injectedWeb3","defaultWeb3","usingInjectedWeb3","instance","_getInjectedWeb3NoLoa","_context2","_this","Proxy","get","obj","prop","__webpack_exports__","TokenIdContext","createContext","TokenIdProvider","children","tokenId","react_default","createElement","Provider","value","connectTokenId","WrappedComponent","props","useContext","newProps","objectSpread","throttledDrizzelConnect","interval","inThrottle","Component","mapStateToProps","MemoComponent","React","memo","prevProps","nextProps","setTimeout","drizzleConnect","ContractData","context","_this$contracts$_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","utils","contracts","methodArgs","drizzle","state","dataKey","contract","methods","method","cacheCall","concat","toConsumableArray","_this$contracts$nextP","didContractChange","didMethodChange","didArgsChange","JSON","stringify","setState","initialized","pendingSpinner","synced","hideIndicator","displayData","toUtf8","hexToUtf8","toAscii","hexToAscii","toEth","fromWei","toDate","moment","parseInt","toString","Array","isArray","displayListItems","map","datum","index","key","i","displayObjectProps","keys","forEach","push","contextTypes","PropTypes","object","UsdPriceContext","DisplayComponent","combinedCollected","vitalikPriceEth","foreclosureTime","usdPrice","priceOfGorillaInUsd","parseFloat","isForeclosed","Date","parse","toUTCString","className","Fragment","components_ContractData","toFixed","ActionSection","getTotalCollected","bind","assertThisInitialized","getPatronageOwed","getVitalikPriceEth","patronageOwedKey","VitalikSteward","patronageOwed","foreclosureTimeKey","totalCollectedKey","totalCollected","vitalikPrice","BN","_this$state","TokenOverview_DisplayComponent","drizzleStatus","Children","only","alternateLoader","status","accounts","BuyModal","inputs","closeModal","e","preventDefault","isOpen","currentTxIndex","openModal","asyncToGenerator","regenerator_default","_x","handleInputChange","handleSubmit","abi","contractFunctions","length","name","j","foreclosed","then","connectedToInjectedWeb3","priceKey","price","event","args","artworkPrice","toWei","add","cacheSend","_newPrice","_this$props","transactions","transactionStack","defineProperty","target","type","test","valueLabel","_this$props2","transactionStatus","txHash","txComplete","transactionProcessing","index_es","mainColor","size","onClick","width","p","Text","icononly","icon","color","position","top","right","mt","mr","mb","react","h3","href","onSubmit","placeholder","onChange","style","startAdornment","InputAdornment_default","TokenOverview","px","py","borderTop","borderColor","justifyContent","ml","createBoundary","data","boundary","Math","random","indexOf","ModalState","sendAsync","opts","cb","request","XMLHttpRequest","options","Promise","resolve","reject","callback","r","onreadystatechange","readyState","timeout","responseText","jsonParse","jsonError","payload","open","accept","setRequestHeader","send","err","input","queryParams","isBuffer","uri","takeHash","sent","_x2","_x3","pin","ipfsHash","fetch","json","cat","text","UploadProgress","image","_ref$uploadProgress","uploadProgress","progress","done","pinned","progPercent","ipfsDagSize","Processing","my","message","UploadImage","_ref2","updateImageHashOnSmartContract","_useState","useState","_useState2","slicedToArray","currentImage","setCurrentImage","progressRef","useRef","UploadImage_UploadProgress","current","id","evt","reader","FileReader","file","files","ipfsApproxDagSize","onload","_ref3","upload","result","Buffer","from","Hash","readAsDataURL","encType","required","imageHash","modalState","handleSubmitOfWebsite","inputValue","updateUrl","handleWebsiteInputChange","Closed","setDepositWithdrawToggle","depositState","depositAvailable","balance","inputValueRawMaybe","inputValueRaw","Deposit","contractFunction","Price","updateWebsiteUrl","_this2","depositKey","depositAbleToWithdraw","depositObj","eth","getBalance","_this3","checked","label","components_UploadImage","alternateBasicImage","initialImageDetailsLoaded","initialImageDetails","urls","src","rootCdnUrl","Dapp","limit","throttleCreator","getBase64Image","hash","hasStartedLoadingIpfsImage","includes","base64Image","useUrlDirectly","calcTotalMonthRevenue","ad1","ad2","ad3","totalMonthRevenue","tokenOwner","hasheKey","hashes","urlKey","websiteUrl","urlNext","hashNext","images","tokenOwnerKey","ERC721Full","ownerOf","tokenOwnerObj","showDapp","web3ProvideSwitcher","isTokenOwner","imageSrc","adLink","Offline","displayPurchase","UpdateModal","components_BuyModal","margin","padding","display","DappConnected","DappWrapper","About","transform","Outline","HowItWorks","PreloadImageContext","PreloadImageProvider","isLoaded","useEffect","anotherValue","TotalRaised","pricesSet","prices","all","_","foreclosedPromise","textAlign","reduce","tot","num","Template","displayToggle","drizzleLoaded","toast","info","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","switchToInjectedWeb3","imageDataLoaded","react_toastify","lib_default","onToggle","web3connect_lib_default","Button","providerOptions","portis","network","fortmatic","onConnect","useExternalWeb3","onClose","TokenIdContext_TokenIdProvider","components_Dapp","data-href","data-layout","data-size","data-show-count","components_About","HowItworks","Template_TotalRaised","InnerComponent","preloadImage","components_Template","PreloadedImageContext_PreloadImageProvider","DrizzleProvider","lazy","__webpack_require__","App","fallback","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cf0f6e5e.chunk.js","sourcesContent":["import Web3 from \"web3\"\n\nconst getInjectedWeb3 = async (): Promise<{ provider: any, providerInjected: boolean }> => {\n\n  if (window.ethereum) {\n    const { ethereum } = window\n    try {\n      await ethereum.enable()\n      return { provider: ethereum, providerInjected: true }\n    } catch (error) {\n      // User denied account access...\n    }\n  } else if (typeof (<any>window).web3 !== 'undefined') {\n    // Checking if Web3 has been injected by the browser (Mist/MetaMask)\n    // Use Mist/MetaMask's provider.\n    const { currentProvider } = (<any>window).web3.currentProvider\n\n    return { provider: currentProvider, providerInjected: true }\n  }\n  // try {\n  //   // Web3 in drizzle seems to have a bug with websockts, using http-provider so long\n  //   var provider = new Web3.providers.WebsocketProvider(\n  //     \"wss://mainnet.infura.io/ws/v3/e811479f4c414e219e7673b6671c2aba\"\n  //   )\n  //   return { provider, providerInjected: false }\n  // } catch (error) {\n  // Out of web3 options; throw.\n  throw new Error('Cannot find injected web3 or valid fallback.')\n  // }\n}\nconst getInjectedWeb3NoLoad = (): { provider: any, providerInjected: boolean } => {\n\n  if (window.ethereum) {\n    const { ethereum } = window\n    try {\n      return { provider: ethereum, providerInjected: true }\n    } catch (error) {\n      // User denied account access...\n      console.log(error)\n    }\n  } else if (typeof (<any>window).web3 !== 'undefined') {\n    console.log('we have the window web3')\n    // Checking if Web3 has been injected by the browser (Mist/MetaMask)\n    // Use Mist/MetaMask's provider.\n    const { currentProvider } = (<any>window).web3.currentProvider\n\n    return { provider: currentProvider, providerInjected: true }\n  }\n  try {\n    // Web3 in drizzle seems to have a bug with websockts, using http-provider so long\n    const provider = new Web3.providers.WebsocketProvider(\n      \"wss://mainnet.infura.io/ws/v3/75b59a0c23fa423fb22639c9cefb5e24\"\n    )\n    return { provider, providerInjected: false }\n  } catch (error) {\n    // Out of web3 options; throw.\n    throw new Error('Cannot find injected web3 or valid fallback.')\n  }\n}\nclass Web3ProviderSwitcher {\n\n  public static instance: Web3ProviderSwitcher\n  public injectedWeb3: any = null\n  public defaultWeb3: any\n  public providerInjected: boolean = false\n  public usingInjectedWeb3: boolean = false\n\n  constructor() {\n    if (Web3ProviderSwitcher.instance) { return Web3ProviderSwitcher.instance }\n    Web3ProviderSwitcher.instance = this\n\n    const { provider, providerInjected } = getInjectedWeb3NoLoad()\n\n    console.log(provider, providerInjected)\n    this.providerInjected = providerInjected\n    this.defaultWeb3 = provider\n  }\n\n\n  public async switchToInjectedWeb3() {\n    if (!window.ethereum && !window.web3) {\n      console.log('no web3 ethereum...')\n      return false\n    }\n    try {\n      const { provider: web3, providerInjected } = await getInjectedWeb3()\n      this.injectedWeb3 = web3\n      this.providerInjected = providerInjected\n      this.usingInjectedWeb3 = true\n    } catch (e) {\n      console.log(e)\n    }\n\n    return this.usingInjectedWeb3\n  }\n\n  public async useExternalWeb3(provider: any) {\n    this.injectedWeb3 = provider\n    this.providerInjected = true\n    this.usingInjectedWeb3 = true\n  }\n\n  public createSwitchableWeb3() {\n    const web3RequestHandler = {\n      get: (obj: any, prop: string) =>\n        this.usingInjectedWeb3 ? this.injectedWeb3[prop] : this.defaultWeb3[prop]\n    }\n\n    return new Proxy({}, web3RequestHandler)\n  }\n}\n\nexport default new Web3ProviderSwitcher()\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const TokenIdContext = createContext<any>('');\n\n\ninterface ProviderProps {\n  children: any,//React.Component\n  tokenId: number\n}\n\nexport const TokenIdProvider: React.FunctionComponent<ProviderProps> = ({ children, tokenId }) => {\n  return <TokenIdContext.Provider value={tokenId}>\n    {children}\n  </TokenIdContext.Provider>\n};\n\nTokenIdProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const useTokenId = () => useContext(TokenIdContext);\n\nexport const connectTokenId = (WrappedComponent: any) => {\n  return (props: any) => {\n    const tokenId = useTokenId()\n    const newProps = { ...props, tokenId }\n    return <WrappedComponent {...newProps} />\n  }\n}\n","import { drizzleConnect } from \"drizzle-react\";\nimport React, { Children, Component } from \"react\";\n\n// cost ComponentWithMemo = (update)\nexport default (interval) => {\n  let inThrottle = false\n  return (Component, mapStateToProps) => {\n    const checkThrottle = () => {\n      if (!inThrottle) {\n        inThrottle = true\n        setTimeout(() => inThrottle = false, interval)\n        return true\n      }\n      return false\n    }\n    const MemoComponent = React.memo(props => <Component{...props} />, (prevProps, nextProps) => checkThrottle())\n\n    return drizzleConnect(\n      (props) => <MemoComponent {...props} />,\n      mapStateToProps\n    )\n  }\n}\n\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { useTokenId } from \"./TokenIdContext\";\nimport { connectTokenId } from \"./TokenIdContext\";\nimport throttledDrizzelConnect from \"./throttledDrizzelConnect\";\n\nclass ContractData extends Component<{\n  contracts: any, methodArgs: any, method: any, contract: any, toUtf8: any\n  , toAscii: any\n  , toEth: any\n  , toDate: any\n  , hideIndicator: any\n}, { dataKey: any }> {\n\n  static contextTypes = {\n    drizzle: PropTypes.object\n  }\n\n  context: any;\n  utils: any\n  contracts: any\n  constructor(props: any, context: any) {\n    super(props);\n\n    // Fetch initial value from chain and return cache key for reactive updates.\n    var methodArgs = this.props.methodArgs ? this.props.methodArgs : [];\n\n    this.utils = context.drizzle.web3.utils;\n    this.contracts = context.drizzle.contracts;\n\n    const tokenId = props.tokenId\n    this.state = {\n      dataKey: this.contracts[this.props.contract].methods[\n        this.props.method\n      ].cacheCall(tokenId, ...methodArgs),\n    };\n  }\n\n  // Will not fix legacy component\n  // eslint-disable-next-line react/no-deprecated\n  componentWillReceiveProps(nextProps: any) {\n    const { methodArgs, contract, method, tokenId } = nextProps;\n\n    const didContractChange = contract !== nextProps.contract;\n    const didMethodChange = method !== nextProps.method;\n    const didArgsChange =\n      JSON.stringify(methodArgs) !== JSON.stringify(nextProps.methodArgs);\n\n    if (didContractChange || didMethodChange || didArgsChange) {\n      this.setState({\n        dataKey: this.contracts[nextProps.contract].methods[\n          nextProps.method\n        ].cacheCall(tokenId, ...nextProps.methodArgs),\n      });\n    }\n  }\n\n  render() {\n    // Contract is not yet intialized.\n    if (!this.props.contracts[this.props.contract].initialized) {\n      return <span>Initializing...</span>;\n    }\n\n    // If the cache key we received earlier isn't in the store yet; the initial value is still being fetched.\n    if (\n      !(\n        this.state.dataKey in\n        this.props.contracts[this.props.contract][this.props.method]\n      )\n    ) {\n      return <span>Fetching...</span>;\n    }\n\n    // Show a loading spinner for future updates.\n    var pendingSpinner = this.props.contracts[this.props.contract].synced\n      ? \"\"\n      : \"\";\n\n    // Optionally hide loading spinner (EX: ERC20 token symbol).\n    if (this.props.hideIndicator) {\n      pendingSpinner = \"\";\n    }\n\n    var displayData = this.props.contracts[this.props.contract][\n      this.props.method\n    ][this.state.dataKey].value;\n\n    // Optionally convert to UTF8\n    if (this.props.toUtf8) {\n      displayData = this.context.drizzle.web3.utils.hexToUtf8(displayData);\n    }\n\n    // Optionally convert to Ascii\n    if (this.props.toAscii) {\n      displayData = this.context.drizzle.web3.utils.hexToAscii(displayData);\n    }\n\n    // Optionally convert wei to ETH\n    if (this.props.toEth) {\n      displayData = this.utils.fromWei(displayData, 'ether');\n    }\n\n    if (this.props.toDate) {\n      displayData = moment(parseInt(displayData) * 1000).toString();\n    }\n\n    // If return value is an array\n    if (Array.isArray(displayData)) {\n      const displayListItems = displayData.map((datum, index) => {\n        return (\n          <li key={index}>\n            {`${datum}`}\n            {pendingSpinner}\n          </li>\n        );\n      });\n\n      return <ul>{displayListItems}</ul>;\n    }\n\n    // If retun value is an object\n    if (typeof displayData === \"object\") {\n      var i = 0;\n      const displayObjectProps: any[] = [];\n\n      Object.keys(displayData).forEach(key => {\n        if (i !== parseInt(key)) {\n          displayObjectProps.push(\n            <li key={i}>\n              <strong>{key}</strong>\n              {pendingSpinner}\n              <br />\n              {`${displayData[key]}`}\n            </li>,\n          );\n        }\n\n        i++;\n      });\n\n      return <ul>{displayObjectProps}</ul>;\n    }\n\n    return (\n      <span>\n        {`${displayData}`}\n        {pendingSpinner}\n      </span>\n    );\n  }\n}\n\n// ContractData.contextTypes = {\n//   drizzle: PropTypes.object,\n// };\n\n/*\n * Export connected component.\n */\n\nconst mapStateToProps = (state: any) => {\n  return {\n    contracts: state.contracts,\n  };\n};\n\nexport default connectTokenId(throttledDrizzelConnect(1000)(ContractData, mapStateToProps))\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n\nimport axios from 'axios';\n\nexport const UsdPriceContext = createContext<any>('');\nexport const getEtherUsdPrice = async () => {\n  // fetch exchange rate.\n  // https://api.kraken.com/0/public/Ticker?pair=ETHUSD).result.XETHZUSD.c.0\n  const ETHUSD = await axios.get('https://api.kraken.com/0/public/Ticker?pair=ETHUSD');\n  // todo: return -1 if URI request failed\n  if (ETHUSD.hasOwnProperty('data')) {\n    return parseFloat(ETHUSD.data.result.XETHZUSD.c[0]);\n  } else {\n    return -1;\n  }\n}\n\ninterface ProviderProps {\n  children: any//React.Component\n}\n\nexport const UsdPriceProvider: React.FunctionComponent<ProviderProps> = ({ children }) => {\n  const [etherUsdPrice, setEtherUsdPrice] = useState(-1);\n\n  useEffect(() => {\n    // if the price has never been set, try to set it immediately\n    if (etherUsdPrice < 0) {\n      getEtherUsdPrice().then(setEtherUsdPrice)\n    }\n\n    const timer = setInterval(async () => {\n      const newEtherUsdPrice = await getEtherUsdPrice();\n      setEtherUsdPrice(newEtherUsdPrice)\n    }, 3000);\n    return () => clearInterval(timer);\n  }, [etherUsdPrice]);\n\n  return <UsdPriceContext.Provider value={etherUsdPrice}>\n    {children}\n  </UsdPriceContext.Provider>\n};\n\nUsdPriceProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const useUsdPrice = () => useContext(UsdPriceContext);\n","import React, { Component, Fragment, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\"\nimport { Tooltip } from 'rimble-ui'\nimport ContractData from \"./ContractData\";\nimport Countdown from \"./Countdown\"\nimport { useUsdPrice } from \"./USDPriceContext\"\nimport { connectTokenId } from \"./TokenIdContext\";\nimport throttledDrizzelConnect from \"./throttledDrizzelConnect\";\n\ndeclare global {\n  interface Window {\n    ethereum: any;\n    initialImageDetails: any;\n    initialImageDetailsLoaded: any\n    rootCdnUrl: any\n  }\n}\n\nwindow.ethereum = window.ethereum || {}\n\ninterface DisplayProps {\n  combinedCollected: string,\n  vitalikPriceEth: string,\n  foreclosureTime: string,\n}\n\nconst nullTime = {\n  years: 0,\n  days: 0,\n  hours: 0,\n  minutes: 0,\n  seconds: 0,\n  millisec: 0,\n}\n\n// const calculateCountdown = (endDate: string) => {\n//   // let diff = (new Date(endDate)).\n//   let diff = (Date.parse((new Date(endDate)).toUTCString()) - Date.parse((new Date()).toUTCString())) / 1000;\n\n//   // clear countdown when date is reached\n//   if (diff <= 0) return nullTime;\n\n//   const timeLeft = nullTime;\n\n//   // calculate time difference between now and expected date\n//   if (diff >= (365.25 * 86400)) { // 365.25 * 24 * 60 * 60\n//     timeLeft.years = Math.floor(diff / (365.25 * 86400));\n//     diff -= timeLeft.years * 365.25 * 86400;\n//   }\n//   if (diff >= 86400) { // 24 * 60 * 60\n//     timeLeft.days = Math.floor(diff / 86400);\n//     diff -= timeLeft.days * 86400;\n//   }\n//   if (diff >= 3600) { // 60 * 60\n//     timeLeft.hours = Math.floor(diff / 3600);\n//     diff -= timeLeft.hours * 3600;\n//   }\n//   if (diff >= 60) {\n//     timeLeft.minutes = Math.floor(diff / 60);\n//     diff -= timeLeft.minutes * 60;\n//   }\n//   timeLeft.seconds = diff;\n\n//   return timeLeft;\n// }\n\n// Functional component for sake of reactHooks...\nconst DisplayComponent: React.FunctionComponent<DisplayProps> = ({ combinedCollected, vitalikPriceEth: vitalikPriceEth, foreclosureTime }) => {\n\n  // const [countDown, setCountdown] = useState(nullTime);\n  const usdPrice = useUsdPrice()\n  const priceOfGorillaInUsd = parseFloat(vitalikPriceEth) * usdPrice\n  const combinedCollectedUsd = parseFloat(combinedCollected) * usdPrice\n\n  // useEffect(() => {\n  //   const date = calculateCountdown(foreclosureTime);\n  //   setCountdown(date);\n  //   const interval = setInterval(() => {\n  //     if (foreclosureTime !== \"N/A\") {\n\n  //       const date = calculateCountdown(foreclosureTime);\n  //       setCountdown(date);\n  //     }\n  //   }, 1000);\n  //   return () => clearTimeout(interval);\n  // }, [foreclosureTime]);\n\n  // const tooltipContent = () =>\n  //   foreclosureTime !== \"N/A\" ?\n  //     <div className=\"section\">\n  //       <p>The deposit for Vitalik will run out on {foreclosureTime}</p>\n  //       <p>Time until deposit runs out in <Countdown countDown={countDown} /></p>\n  //     </div>\n  //     :\n  //     <div className=\"section\">\n  //       <p>Loading deposit info</p>\n  //     </div>\n\n  let diff = (Date.parse((new Date(parseInt(foreclosureTime) * 1000)).toUTCString()) - Date.parse((new Date()).toUTCString())) / 1000;\n\n  // clear countdown when date is reached\n  const isForeclosed = (diff <= 0);\n  return (\n\n    <div className=\"section image-block-text\">\n      {/* <Tooltip message={tooltipContent()}> */}\n      {isForeclosed ? <React.Fragment>\n        <p>\n          The deposit on this token has run out. Pick it up for free!\n        </p>\n      </React.Fragment>\n        :\n        <React.Fragment>\n          <p>\n            Current Price: <ContractData contract=\"VitalikSteward\" method=\"price\" toEth /> ETH.{priceOfGorillaInUsd > 0 && ` (~ ${priceOfGorillaInUsd.toFixed(2)} USD)`}\n          </p>\n        </React.Fragment>}\n      {/* </Tooltip> */}\n    </div>\n    // <br />\n    // Total Raised: {(parseFloat(combinedCollected) < 0) ? 'LOADING' : parseFloat(combinedCollected).toFixed(7/*7 digits is enough to see the price changing when asset is reasonably priced*/)} ETH.{combinedCollectedUsd > 0 && ` (~ ${combinedCollectedUsd.toFixed(2)} USD)`}\n  )\n}\nclass ActionSection extends Component<{ contracts: any }, {}>  {\n  utils: any\n  contracts: any\n  state: {\n    patronageOwedKey: string\n    totalCollectedKey: string\n    foreclosureTimeKey: string\n    patronageOwed: string\n    combinedCollected: string\n    foreclosureTime: string\n    vitalikPrice: string\n  }\n\n  static contextTypes = {\n    drizzle: PropTypes.object\n  }\n\n  context: any;\n  constructor(props: any, context: any) {\n    super(props, context)\n    this.utils = context.drizzle.web3.utils;\n    this.contracts = context.drizzle.contracts;\n\n    this.getTotalCollected = this.getTotalCollected.bind(this)\n    this.getPatronageOwed = this.getPatronageOwed.bind(this)\n    this.getVitalikPriceEth = this.getVitalikPriceEth.bind(this)\n    const { tokenId } = props\n    this.state = {\n      patronageOwedKey: context.drizzle.contracts.VitalikSteward.methods.patronageOwed.cacheCall(tokenId),\n      foreclosureTimeKey: context.drizzle.contracts.VitalikSteward.methods.foreclosureTime.cacheCall(tokenId),\n      totalCollectedKey: context.drizzle.contracts.VitalikSteward.methods.totalCollected.cacheCall(tokenId),\n      patronageOwed: \"-1\",\n      combinedCollected: \"-1\",\n      foreclosureTime: \"N/A\",\n      vitalikPrice: \"-1\",\n    };\n    this.state = {\n      ...this.state,\n      patronageOwed: this.getPatronageOwed(props),\n      // combinedCollected: this.getCombinedCellected(props),\n      vitalikPrice: this.getVitalikPriceEth(props),\n    };\n  }\n\n  getTotalCollected(props: any) {\n    if (props.contracts['VitalikSteward'].initialized && !!props.contracts['VitalikSteward']['totalCollected'][this.state.totalCollectedKey])\n      return new this.utils.BN(props.contracts['VitalikSteward']['totalCollected'][this.state.totalCollectedKey].value);\n\n    return \"-1\"\n  }\n\n\n  getPatronageOwed(props: any) {\n    if (props.contracts['VitalikSteward'].initialized && !!props.contracts['VitalikSteward']['patronageOwed'][this.state.patronageOwedKey])\n      return new this.utils.BN(props.contracts['VitalikSteward']['patronageOwed'][this.state.patronageOwedKey].value);\n\n    return \"-1\"\n  }\n\n  getVitalikPriceEth(props: any) {\n    if (props.contracts['VitalikSteward'].initialized && !!props.contracts['VitalikSteward']['price']['0x0'])\n      return this.utils.fromWei(new this.utils.BN(props.contracts['VitalikSteward']['price']['0x0'].value), 'ether').toString()\n\n    return \"-1\"\n  }\n  // getCombinedCellected(props: any) {\n  //   const patronageOwed = this.getPatronageOwed(props);\n  //   const totalCollected = this.getTotalCollected(props);\n  //   if (patronageOwed !== \"-1\" && totalCollected !== \"-1\")\n  //     return this.utils.fromWei(totalCollected.add(patronageOwed), 'ether').toString();\n\n  //   return \"-1\"\n  // }\n\n  // async updateCombineCollected(props: any) {\n  //   const patronageOwed = this.getPatronageOwed(props);\n  //   const combinedCollected = this.getCombinedCellected(props)\n\n  //   // This is hacky, but just putting this here for now\n  //   const vitalikPrice = this.getVitalikPriceEth(props);\n\n  //   this.setState({\n  //     patronageOwed,\n  //     combinedCollected,\n  //     vitalikPrice,\n  //   });\n  // }\n  // loadComponentData\n\n  async componentWillReceiveProps(nextProps: any) {\n    if (this.props.contracts['VitalikSteward']['foreclosureTime'][this.state.foreclosureTimeKey] !== nextProps.contracts['VitalikSteward']['foreclosureTime'][this.state.foreclosureTimeKey]) {\n      const foreclosureTime = nextProps.contracts['VitalikSteward']['foreclosureTime'][this.state.foreclosureTimeKey].value\n      this.setState({ foreclosureTime });\n    }\n\n    // if (this.state.patronageOwedKey in this.props.contracts['VitalikSteward']['patronageOwed']\n    //   && this.state.patronageOwedKey in nextProps.contracts['VitalikSteward']['patronageOwed']\n    //   && this.state.totalCollectedKey in this.props.contracts['VitalikSteward']['totalCollected']\n    //   && this.state.totalCollectedKey in nextProps.contracts['VitalikSteward']['totalCollected']) {\n    //   const ownedNow = this.getPatronageOwed(this.props)\n    //   const ownedNext = this.getPatronageOwed(nextProps)\n    //   if (ownedNow === \"-1\" || ownedNext === \"-1\" || !ownedNow.eq(ownedNext) || this.state.combinedCollected === \"-1\") {\n    //     this.updateCombineCollected(nextProps);\n    //   }\n    // }\n  }\n\n  render() {\n\n    const { combinedCollected, vitalikPrice, foreclosureTime } = this.state\n\n\n    return (\n      <DisplayComponent {...{ combinedCollected, vitalikPriceEth: vitalikPrice, foreclosureTime }} />\n    )\n  }\n}\n\n/*\n * Export connected component.\n */\n\nconst mapStateToProps = (state: any) => {\n  return {\n    contracts: state.contracts,\n  };\n};\n\nexport default connectTokenId(throttledDrizzelConnect(1000)(ActionSection, mapStateToProps))\n\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport throttledDrizzelConnect from \"./throttledDrizzelConnect\";\n\n/*\n * Create component.\n */\n\n// const throttleCreator = (limit, numItems) => {\n//   let inThrottle = Array(numItems)\n//   return function (i, time) {\n//     if (!inThrottle) {\n//       inThrottle[i] = true\n//       setTimeout(() => inThrottle[i] = false, time)\n//       return true\n//     }\n//     return false\n//   }\n// }\n// const throttle = throttleCreator(3)\n\nconst OfflineContainer = (props) => {\n  if (props.drizzleStatus.initialized) {\n    return Children.only(props.children);\n  }\n\n  if (!!props.alternateLoader) {\n    return <props.alternateLoader />\n  }\n\n  if (props.web3.status === \"\") {\n    return (\n      <div className=\"section\">\n        This application is offline. Please ensure you have an Ethereum/web3 enabled browser.\n        </div>\n    )\n  }\n\n\n  return (\n    <main className=\"container loading-screen\">\n      <div className=\"pure-g\">\n        <div className=\"pure-u-1-1\">\n          <h1>⚙️</h1>\n          <p>Loading dapp...</p>\n        </div>\n      </div>\n    </main>\n  );\n}\n\n/*\n * Export connected component.\n */\n\nconst mapStateToProps = (state) => {\n  return {\n    accounts: state.accounts,\n    drizzleStatus: state.drizzleStatus,\n    web3: state.web3,\n  };\n};\n\nexport default throttledDrizzelConnect(1000)(OfflineContainer, mapStateToProps);\n","import PropTypes from 'prop-types';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport React, { Component, Fragment } from 'react';\nimport {\n  Button,\n  Modal,\n  Card,\n  Box,\n  Heading,\n  Text,\n  Flex,\n  Loader,\n  Input\n} from 'rimble-ui';\nimport web3ProvideSwitcher from '../web3ProvideSwitcher';\nimport TokenOverview from './TokenOverview';\nimport { connectTokenId } from './TokenIdContext';\nimport throttledDrizzelConnect from './throttledDrizzelConnect';\n\ninterface state {\n  contractFunctions: any;\n  isOpen: boolean;\n  connectedToInjectedWeb3: boolean;\n  currentTxIndex: number;\n  priceKey: any;\n  isForeclosed: boolean;\n}\n\nclass BuyModal extends Component<any, any> {\n  contracts: any;\n  utils: any;\n  inputs: any;\n  state: state;\n\n  static contextTypes = {\n    drizzle: PropTypes.object\n  };\n\n  context: any;\n\n  constructor(props: any, context: any) {\n    super(props);\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n    this.contracts = context.drizzle.contracts;\n    this.utils = context.drizzle.web3.utils;\n\n    // Get the contract ABI, if it is undefined return an empty array\n    const abi = !!this.contracts.VitalikSteward\n      ? this.contracts.VitalikSteward.abi\n      : [];\n\n    this.inputs = [];\n    let contractFunctions: any = {};\n\n    // Iterate over abi for correct function.\n    for (let i = 0; i < abi.length; i++) {\n      if (abi[i].name === 'buy') {\n        this.inputs = abi[i].inputs;\n\n        for (let j = 0; j < this.inputs.length; j++) {\n          contractFunctions[this.inputs[j].name] = '';\n        }\n\n        break;\n      }\n    }\n\n    this.contracts.VitalikSteward.methods.foreclosed(props.tokenId).call().then(\n      (foreclosed: boolean) => this.setState({ ...this.state, isForeclosed: foreclosed })\n    )\n\n    this.state = {\n      contractFunctions,\n      isOpen: false,\n      connectedToInjectedWeb3: false,\n      currentTxIndex: -1,\n      priceKey: context.drizzle.contracts.VitalikSteward.methods.price.cacheCall(props.tokenId),\n      isForeclosed: false\n    };\n  }\n\n  handleSubmit(event: any) {\n    event.preventDefault();\n    let args: any = {};\n\n    // todo: if foreclosed, price should default to zero.\n    if (this.state.contractFunctions.value) {\n      const priceKey = this.props.contracts.VitalikSteward['price'][this.state.priceKey]\n      const price = !!priceKey ? (!!priceKey.value ? priceKey.value : 0) : 0\n      const artworkPrice = new this.utils.BN(\n        price\n      );\n      args.value = new this.utils.BN(\n        this.utils.toWei(this.state.contractFunctions.value, 'ether')\n      ).add(\n        this.state.isForeclosed ?\n          new this.utils.BN(0) :\n          artworkPrice);\n    }\n\n    const currentTxIndex = args\n      ? this.contracts.VitalikSteward.methods['buy'].cacheSend(\n        this.props.tokenId,\n        this.utils.toWei(\n          this.state.contractFunctions._newPrice,\n          'ether'\n        ),\n        args\n      )\n      : this.contracts.VitalikSteward.methods['buy'].cacheSend(\n        this.props.tokenId,\n        this.utils.toWei(\n          this.state.contractFunctions._newPrice,\n          'ether'\n        ),\n      );\n\n    this.setState((state: any, props: any) => ({\n      ...state,\n      currentTxIndex\n    }));\n  }\n\n  componentWillReceiveProps(nextProps: any) {\n    const { transactions, transactionStack } = this.props;\n\n    const didTransactionsChange = transactions !== nextProps.transactions;\n    const didTransactionStackChange =\n      transactionStack !== nextProps.transactionStack;\n  }\n\n  handleInputChange(event: any) {\n    this.setState({\n      ...this.state,\n      contractFunctions: {\n        ...this.state.contractFunctions,\n        [event.target.name]: event.target.value\n      }\n    });\n  }\n\n  translateType(type: any) {\n    switch (true) {\n      case /^uint/.test(type):\n        return 'number';\n      case /^string/.test(type) || /^bytes/.test(type):\n        return 'text';\n      case /^bool/.test(type):\n        return 'checkbox';\n      default:\n        return 'text';\n    }\n  }\n\n  closeModal = (e: any) => {\n    e.preventDefault();\n    this.setState((state: any, props: any) => ({\n      ...state,\n      isOpen: false,\n      currentTxIndex: -1\n    }));\n  };\n\n  openModal = async (e: any) => {\n    e.preventDefault();\n    this.setState((state: any, props: any) => ({\n      ...state,\n      isOpen: true,\n      currentTxIndex: -1\n    }));\n  };\n\n  render() {\n    const valueLabel = 'Your Initial Deposit';\n    const { transactions, transactionStack } = this.props;\n    const { currentTxIndex } = this.state;\n    let transactionStatus = 'Submitting transaction to the Ethereum Network.';\n    let txHash = '';\n    let txComplete = false;\n    if (!!transactionStack[this.state.currentTxIndex]) {\n      const tempTxHash = transactionStack[this.state.currentTxIndex];\n      if (!!transactions[tempTxHash]) {\n        txHash = transactionStack[this.state.currentTxIndex];\n        switch (transactions[txHash].status) {\n          case 'pending':\n            transactionStatus =\n              'Transaction being processed by the Ethereum Network.';\n            break;\n          case 'success':\n            txComplete = true;\n            transactionStatus = 'Transaction is complete.';\n            break;\n        }\n      }\n    }\n\n    const transactionProcessing = currentTxIndex !== -1;\n    return (\n      <React.Fragment>\n        <Button mainColor='#7A7A7A' size=\"small\" onClick={this.openModal}>{this.state.isForeclosed ? \"Claim\" : \"Buy\"}</Button>\n\n        <Modal isOpen={this.state.isOpen}>\n          <Card width={'420px'} p={0}>\n            <Button.Text\n              icononly\n              icon={'Close'}\n              color={'moon-gray'}\n              position={'absolute'}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={this.closeModal}\n            />\n            {(!!this.props.accounts[0] || this.state.connectedToInjectedWeb3) ? (\n              <Box p={4} mb={3} i>\n                {transactionProcessing ? (\n                  <Fragment>\n                    <Heading.h3>Processing Transaction</Heading.h3>\n                    <p>{transactionStatus}</p>\n                    {!!txHash && (\n                      <a\n                        href={'https://etherscan.io/tx/' + txHash}\n                        target='_blank'\n                      >\n                        View transaction on Ethersan\n                      </a>\n                    )}\n                    {!txComplete && <Loader color='red' size='80px' />}\n                  </Fragment>\n                ) : (\n                    <Fragment>\n                      <Heading.h3>Purchase</Heading.h3>\n                      <Text>Enter the desired values for the transaction.</Text>\n                      <form\n                        className='pure-form pure-form-stacked'\n                        onSubmit={this.handleSubmit}\n                      >\n                        <Input\n                          key='_newPrice'\n                          type='number'\n                          name='_newPrice'\n                          value={this.state.contractFunctions['_newPrice']}\n                          placeholder={'Your Initial Sale Price'}\n                          onChange={this.handleInputChange}\n                          style={{ width: '100%' }}\n                          startAdornment={\n                            <InputAdornment position='start'>ETH</InputAdornment>\n                          }\n                        />\n                        <Fragment>\n                          <br />\n                          <Input\n                            key={valueLabel}\n                            type='number'\n                            name='value'\n                            value={this.state.contractFunctions[valueLabel]}\n                            placeholder={valueLabel}\n                            onChange={this.handleInputChange}\n                            style={{ width: '100%' }}\n                            startAdornment={\n                              <InputAdornment position='start'>\n                                ETH\n                            </InputAdornment>\n                            }\n                          />\n                          <br />\n                          <br />\n                        </Fragment>\n                      </form>\n                      <TokenOverview />\n                    </Fragment>\n                  )}\n              </Box>\n            ) : (\n                <Box p={4} mb={3}>\n                  <Heading.h3>NOTICE</Heading.h3>\n                  <Text>\n                    Unable to connect to metamask, so unable to sign transactions.\n                </Text>\n                </Box>)\n            }\n            {(!transactionProcessing) && <Flex px={4} py={3} borderTop={1} borderColor={'#E8E8E8'} justifyContent={'flex-end'}>\n              {/* <Button.Outline>Cancel</Button.Outline> In the future this could be for resetting the values or something*/}\n              <Button\n                mainColor='#7A7A7A' size=\"small\"\n                ml={3}\n                onClick={this.handleSubmit}\n              >Purchase this ad space</Button>\n            </Flex>}\n          </Card>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => {\n  return {\n    contracts: state.contracts,\n    transactions: state.transactions,\n    transactionStack: state.transactionStack,\n    accounts: state.accounts\n  };\n};\n\nexport default connectTokenId(throttledDrizzelConnect(1000)(BuyModal, mapStateToProps))\n","// export const add = (data, name, queryParams) => {\n//   const formData = new FormData()\n//   formData.append('data0', data, name)\n\n//   return fetch('https://ipfs.infura.io:5001/api/v0/add' + queryParams, {\n//     method: 'POST',\n//     body: formData\n//   })\n//     .then(r => r.json())\n//     .then(data => data)\n// }\nfunction createBoundary(data) {\n  while (true) {\n    var boundary = `----IPFSMini${Math.random() * 100000}.${Math.random() * 100000}`;\n    if (data.indexOf(boundary) === -1) {\n      console.log('not sure why this occurred...')\n      return boundary;\n    }\n    return boundary\n  }\n}\n\n// copy pasted from here:\nconst sendAsync = function sendAsync(opts, cb) {\n  var self = this;\n  var request = new XMLHttpRequest(); // eslint-disable-line\n  var options = opts || {};\n\n  return new Promise(function (resolve, reject) {\n    function callback(e, r) {\n      // console.log(e, r)\n      // cb(e, r);\n      if (e) return reject(e);\n      if (!e && r) return resolve(r);\n    };\n\n    request.onreadystatechange = function () {\n      if (request.readyState === 4 && request.timeout !== 1) {\n        if (request.status !== 200) {\n          callback(new Error(`[custom-ipfs] status ${request.status}: ${request.responseText}`), null);\n        } else {\n          try {\n            callback(null, (options.jsonParse ? JSON.parse(request.responseText) : request.responseText));\n          } catch (jsonError) {\n            callback(new Error(`error`, null));\n          }\n        }\n      }\n    };\n\n    try {\n      var pinningURI = '?pin=false' // hardcoded for now\n\n      if (options.payload) {\n        request.open('POST', `${'https://ipfs.infura.io:5001/api/v0/add'}${pinningURI}`);\n      } else {\n        request.open('GET', `${'https://ipfs.infura.io:5001/api/v0/add'}${pinningURI}`);\n      }\n\n      if (options.accept) {\n        request.setRequestHeader('accept', options.accept);\n      }\n\n      if (options.payload && options.boundary) {\n        request.setRequestHeader('Content-Type', `multipart/form-data; boundary=${options.boundary}`);\n        request.send(options.payload);\n      } else {\n        request.send();\n      }\n    } catch (err) {\n      callback(err, null);\n    }\n  });\n};\n\n/**\n * Add an string or buffer to IPFS\n * @param {String|Buffer} `input` a single string or buffer\n * @param {Function} `callback` a callback, with (error, ipfsHash String)\n * @callback {String} `ipfsHash` returns an IPFS hash string\n */\nexport const add = async (input, name, queryParams) => {\n  console.log('add was called')\n  var data = ((typeof input === 'object' && input.isBuffer) ? input.toString('binary') : input);\n  console.log('add was called - 2')\n  var boundary = createBoundary(data);\n  console.log('add was called - 3')\n  var payload = `--${boundary}\\r\\nContent-Disposition: form-data; name=\"path\"\\r\\nContent-Type: application/octet-stream\\r\\n\\r\\n${data}\\r\\n--${boundary}--`;\n\n  console.log('in the add')\n  // return fetch('https://ipfs.infura.io:5001/api/v0/add' + queryParams, {\n  //   method: 'POST',\n  //   headers: {\n  //     'Accept': 'application/json',\n  //     'Content-Type': 'multipart/form-data; boundary=${boundary}'\n  //   },\n  //   body: payload,\n  // })\n  //   .then(r => r.json())\n  //   .then(data => data)\n  return await sendAsync({\n    jsonParse: true,\n    accept: 'application/json',\n    uri: '/add',\n    takeHash: true,\n    payload, boundary,\n  });\n};\n\nexport const pin = (ipfsHash) => fetch(\n  'https://ipfs.infura.io:5001/api/v0/pin/add?arg=/ipfs/' + ipfsHash\n)\n  .then(r => r.json())\n  .then(data => data)\n\nexport const cat = (ipfsHash) => fetch(\n  'https://ipfs.infura.io:5001/api/v0/cat?arg=' + ipfsHash\n)\n  .then(r => r.text())\n  .then(data => data)\n\n","import PropTypes from \"prop-types\";\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport React, { Component, Fragment } from \"react\";\nimport { Button, Modal, Card, Box, Heading, Text, Flex, Loader, Input, Radio } from 'rimble-ui'\nimport web3ProvideSwitcher from \"../web3ProvideSwitcher\"\nimport TokenOverview from \"./TokenOverview\"\nimport moment from 'moment'\nimport { useTokenId, connectTokenId } from \"./TokenIdContext\";\nimport UploadImage from './UploadImage'\nimport throttledDrizzelConnect from \"./throttledDrizzelConnect\";\n\nenum ModalState {\n  Deposit,\n  Price,\n  Closed,\n  UploadImage,\n  updateWebsiteUrl\n}\n\ninterface state {\n  contractFunctions: any,\n  modalState: ModalState,\n  connectedToInjectedWeb3: boolean,\n  currentTxIndex: number,\n  depositState: boolean,\n  depositAvailable: any,\n  balance: number,\n  updateUrl: string\n}\n\nclass BuyModal extends Component<any, any> {\n  contracts: any\n  utils: any\n  inputs: any\n  state: state\n  drizzle: any\n\n  // Note, context is used to get the full drizzle object. This is slightly hacky, we should be able to do this with the drizzleConnect component only.\n  static contextTypes = {\n    drizzle: PropTypes.object\n  }\n\n  context: any;\n\n  constructor(props: any, context: any) {\n    super(props);\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n    this.contracts = context.drizzle.contracts;\n    this.utils = context.drizzle.web3.utils;\n    this.drizzle = context.drizzle\n\n    // Get the contract ABI, if it is undefined return an empty array\n    const abi = (!!this.contracts.VitalikSteward) ? this.contracts.VitalikSteward.abi : [];\n\n    this.inputs = [];\n    let contractFunctions: any = {};\n\n    this.state = {\n      contractFunctions,\n      modalState: ModalState.Closed,\n      connectedToInjectedWeb3: false,\n      currentTxIndex: -1,\n      depositState: true,\n      depositAvailable: '',\n      updateUrl: '',\n      balance: -1,\n    };\n  }\n\n\n  updateImageHashOnSmartContract = (imageHash: string) => {\n    let currentTxIndex: number\n    if (this.state.modalState === ModalState.UploadImage) {\n      currentTxIndex = this.contracts.VitalikSteward.methods[\n        'changeImage'\n      ].cacheSend(this.props.tokenId, imageHash)\n    }\n\n    this.setState((state: any, props: any) => ({\n      ...state,\n      currentTxIndex\n    }))\n  }\n\n  handleSubmitOfWebsite = (event: any) => {\n    event.preventDefault();\n    let inputValue = this.state.updateUrl\n    let currentTxIndex: any\n    // if(this.state.modalState === ModalState.updateWebsiteUrl){\n    currentTxIndex = this.contracts.VitalikSteward.methods[\n      'changeUrl'\n    ].cacheSend(this.props.tokenId, inputValue)\n    // }\n    this.setState((state: any, props: any) => ({\n      ...state,\n      currentTxIndex\n    }))\n  }\n\n  handleSubmit(event: any) {\n    event.preventDefault();\n    let inputValueRawMaybe = this.state.contractFunctions['newSettingValue'] // all number fields are ETH  fields.\n    let inputValueRaw = !!inputValueRawMaybe ? inputValueRawMaybe : 0\n    let inputValue = this.utils.toWei(inputValueRaw, 'ether'); // all number fields are ETH  fields.\n    let currentTxIndex: number\n    if (this.state.modalState === ModalState.Deposit) {\n      const contractFunction = this.state.depositState ? 'depositWei' : 'withdrawDeposit'\n      currentTxIndex = this.contracts.VitalikSteward.methods[\n        contractFunction\n      ].cacheSend(this.props.tokenId, { value: inputValue })\n    } else if (this.state.modalState === ModalState.Price) {\n      currentTxIndex = this.contracts.VitalikSteward.methods[\n        'changePrice'\n      ].cacheSend(this.props.tokenId, inputValue)\n    }\n    else if (this.state.modalState === ModalState.updateWebsiteUrl) {\n      currentTxIndex = this.contracts.VitalikSteward.methods[\n        'changeUrl'\n      ].cacheSend(this.props.tokenId, inputValue)\n    }\n    // else if(this.state.modalState === ModalState.UploadImage){\n    //   currentTxIndex = this.contracts.VitalikSteward.methods[\n    //     'changeImage'\n    //   ].cacheSend(this.props.tokenId, inputValue)\n    // }\n\n    this.setState((state: any, props: any) => ({\n      ...state,\n      currentTxIndex\n    }))\n  }\n\n  componentWillReceiveProps(nextProps: any) {\n    const { transactions, transactionStack, tokenId } = this.props;\n\n    // const didTransactionsChange = transactions !== nextProps.transactions;\n    // const didTransactionStackChange = transactionStack !== nextProps.transactionStack;\n\n    const depositKey = this.context.drizzle.contracts.VitalikSteward.methods.depositAbleToWithdraw.cacheCall(tokenId)\n    const depositObj = nextProps.contracts.VitalikSteward.depositAbleToWithdraw[depositKey]\n\n    if (!!depositObj && !!depositObj.value) {\n      const depositAvailable = this.utils.fromWei(depositObj.value, 'ether')\n      if (this.state.depositAvailable !== depositAvailable) {\n        this.setState({\n          ...this.state,\n          depositAvailable\n        })\n      }\n    }\n\n    if (!!depositObj && !!depositObj.value) {\n      const depositAvailable = this.utils.fromWei(depositObj.value, 'ether')\n      if (this.state.depositAvailable !== depositAvailable) {\n        this.setState({\n          ...this.state,\n          depositAvailable\n        })\n      }\n    }\n    if (!!this.props.accounts && !!this.props.accounts[0]) {\n      this.drizzle.web3.eth.getBalance(this.props.accounts[0]).then((balance: number) => {\n        this.setState({\n          ...this.state,\n          balance\n        })\n      })\n    }\n  }\n\n  handleWebsiteInputChange = (event: any) => {\n    this.setState({\n      ...this.state,\n      updateUrl: event.target.value\n    })\n  }\n\n  handleInputChange(event: any) {\n    this.setState({\n      ...this.state,\n      contractFunctions: {\n        ...this.state.contractFunctions, [event.target.name]: event.target.value\n      }\n    })\n  }\n\n\n\n  translateType(type: any) {\n    switch (true) {\n      case /^uint/.test(type):\n        return \"number\";\n      case /^string/.test(type) || /^bytes/.test(type):\n        return \"text\";\n      case /^bool/.test(type):\n        return \"checkbox\";\n      default:\n        return \"text\";\n    }\n  }\n\n  closeModal = (e: any) => {\n    e.preventDefault()\n    this.setState((state: any, props: any) => ({\n      ...state,\n      modalState: ModalState.Closed,\n      currentTxIndex: -1,\n    }))\n  }\n\n  setDepositWithdrawToggle = (depositState: boolean) => {\n    this.setState((state: any, props: any) => ({\n      ...state,\n      depositState,\n    }))\n  }\n\n  openModal = async (modalState: ModalState) => {\n    this.setState((state: any, props: any) => ({\n      ...state,\n      modalState,\n      currentTxIndex: -1,\n    }))\n  }\n\n  render() {\n    // const valueLabel = \"Your Initial Deposit\";\n    const { transactions, transactionStack } = this.props\n    const { currentTxIndex } = this.state\n    let transactionStatus = 'Submitting transaction to the Ethereum Network.'\n    let txHash = ''\n    let txComplete = false\n    if (!!transactionStack[this.state.currentTxIndex]) {\n      const tempTxHash = transactionStack[this.state.currentTxIndex]\n      if (!!transactions[tempTxHash]) {\n        txHash = transactionStack[this.state.currentTxIndex]\n        switch (transactions[txHash].status) {\n          case 'pending':\n            transactionStatus = 'Transaction being processed by the Ethereum Network.'\n            break\n          case 'success':\n            txComplete = true\n            transactionStatus = 'Transaction is complete.'\n            break\n        }\n      }\n    }\n\n    const transactionProcessing = currentTxIndex !== -1\n\n    return (\n      <React.Fragment>\n        <Button style={{ width: '100%' }} mainColor='#7A7A7A' size=\"small\" onClick={() => this.openModal(ModalState.Price)} > Update Price</Button>\n        &ensp;\n        <Button style={{ width: '100%' }} mainColor='#7A7A7A' size=\"small\" onClick={() => this.openModal(ModalState.Deposit)} > Add/Remove Deposit</Button>\n        &ensp;\n        <Button style={{ width: '100%' }} mainColor='#7A7A7A' size=\"small\" onClick={() => this.openModal(ModalState.UploadImage)} > Upload Image</Button>\n        &ensp;\n        <Button style={{ width: '100%' }} mainColor='#7A7A7A' size=\"small\" onClick={() => this.openModal(ModalState.updateWebsiteUrl)} > Update Website</Button>\n        <div style={{ position: 'absolute', top: '1000' }}>\n          <Modal isOpen={this.state.modalState === ModalState.Price}>\n            <Card width={'420px'} p={0}>\n              <Button.Text\n                icononly\n                icon={'Close'}\n                color={'moon-gray'}\n                position={'absolute'}\n                top={0}\n                right={0}\n                mt={3}\n                mr={3}\n                onClick={this.closeModal}\n              />\n              {(!!this.props.accounts[0] || this.state.connectedToInjectedWeb3) ?\n\n                <Box p={4} mb={3}>{\n                  transactionProcessing ?\n                    <Fragment>\n                      <Heading.h3>Processing Transaction</Heading.h3>\n                      <p>{transactionStatus}</p>\n                      {!!txHash && <a href={'https://etherscan.io/tx/' + txHash} target=\"_blank\">View transaction on Ethersan</a>}\n                      {!txComplete && <Loader color=\"red\" size=\"80px\" />}\n                    </Fragment>\n                    :\n                    <Fragment>\n                      <Heading.h3>Price</Heading.h3>\n                      <Text>\n                        How much would you like to receive from selling Vitalik?\n                    </Text>\n                      <form className=\"pure-form pure-form-stacked\" onSubmit={this.handleSubmit}>\n                        <Input\n                          key='newSettingValue'\n                          type='number'\n                          name='newSettingValue'\n                          value={this.state.contractFunctions['newSettingValue'] || 0}\n                          placeholder={`Price`}\n                          onChange={this.handleInputChange}\n                          style={{ width: '100%' }}\n                          startAdornment={<InputAdornment position=\"start\">ETH</InputAdornment>}\n                        />\n                        <br />\n                      </form>\n                      <TokenOverview />\n                    </Fragment>}\n                </Box>\n                :\n                <Box p={4} mb={3}>\n                  <Heading.h3>NOTICE</Heading.h3>\n                  <Text>\n                    Unable to connect to metamask, so unable to sign transactions.\n                </Text>\n                </Box>\n              }\n              {(!transactionProcessing) && <Flex px={4} py={3} borderTop={1} borderColor={'#E8E8E8'} justifyContent={'flex-end'}>\n                {/* <Button.Outline>Cancel</Button.Outline> In the future this could be for resetting the values or something*/}\n                <Button\n                  mainColor='#7A7A7A' size=\"small\"\n                  ml={3}\n                  onClick={this.handleSubmit}\n                >Update</Button>\n              </Flex>}\n            </Card>\n          </Modal>\n        </div>\n        <Modal isOpen={this.state.modalState === ModalState.Deposit}>\n          <Card width={'420px'} p={0}>\n            <Button.Text\n              icononly\n              icon={'Close'}\n              color={'moon-gray'}\n              position={'absolute'}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={this.closeModal}\n            />\n            {(!!this.props.accounts[0] || this.state.connectedToInjectedWeb3) ?\n\n              <Box p={4} mb={3}>{\n                transactionProcessing ?\n                  <Fragment>\n                    <Heading.h3>Processing Transaction</Heading.h3>\n                    <p>{transactionStatus}</p>\n                    {!!txHash && <a href={'https://etherscan.io/tx/' + txHash} target=\"_blank\">View transaction on Ethersan</a>}\n                    {!txComplete && <Loader color=\"red\" size=\"80px\" />}\n                  </Fragment>\n                  :\n                  <Fragment>\n                    <Heading.h3>Deposit</Heading.h3>\n                    <Text>\n                      How do you want to change your deposit?\n                    </Text>\n                    <Radio checked={this.state.depositState} onChange={() => this.setDepositWithdrawToggle(true)} label=\"Deposit\" my={2} />\n                    <Radio checked={!this.state.depositState} onChange={() => this.setDepositWithdrawToggle(false)} label=\"Withdrawl\" my={2} />\n                    <form className=\"pure-form pure-form-stacked\" onSubmit={this.handleSubmit}>\n                      <Input\n                        key='newSettingValue'\n                        type='number'\n                        name='newSettingValue'\n                        value={this.state.contractFunctions['newSettingValue'] || 0}\n                        placeholder={`Amount to ${this.state.depositState ? 'add' : 'remove'}`}\n                        onChange={this.handleInputChange}\n                        style={{ width: '100%' }}\n                        startAdornment={<InputAdornment position=\"start\">ETH</InputAdornment>}\n                      />\n                      <br />\n                    </form>\n                    <TokenOverview />\n                  </Fragment>}\n              </Box>\n              :\n              <Box p={4} mb={3}>\n                <Heading.h3>NOTICE</Heading.h3>\n                <Text>\n                  Unable to connect to metamask, so unable to sign transactions.\n                </Text>\n              </Box>\n            }\n            {(!transactionProcessing) && <Flex px={4} py={3} borderTop={1} borderColor={'#E8E8E8'} justifyContent={'flex-end'}>\n              {/* <Button.Outline>Cancel</Button.Outline> In the future this could be for resetting the values or something*/}\n              <Button\n                mainColor='#7A7A7A' size=\"small\"\n                ml={3}\n                onClick={this.handleSubmit}\n              >{this.state.depositState ? 'Add' : 'Withdraw'}</Button>\n            </Flex>}\n          </Card>\n        </Modal>\n        <Modal isOpen={this.state.modalState === ModalState.UploadImage}>\n          <Card width={'420px'} p={0}>\n            <Button.Text\n              icononly\n              icon={'Close'}\n              color={'moon-gray'}\n              position={'absolute'}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={this.closeModal}\n            />\n            {(!!this.props.accounts[0] || this.state.connectedToInjectedWeb3) ?\n\n              <Box p={4} mb={3}>{\n                // transactionProcessing ?\n                //   <Fragment>\n                //     <Heading.h3>Processing Transaction</Heading.h3>\n                //     <p>{transactionStatus}</p>\n                //     {!!txHash && <a href={'https://etherscan.io/tx/' + txHash} target=\"_blank\">View transaction on Ethersan</a>}\n                //     {!txComplete && <Loader color=\"red\" size=\"80px\" />}\n                //   </Fragment>\n                //   :\n                <Fragment>\n                  <form className=\"pure-form pure-form-stacked\">\n                    <UploadImage updateImageHashOnSmartContract={this.updateImageHashOnSmartContract} />\n                    <br />\n                  </form>\n                  <TokenOverview />\n                </Fragment>\n              }\n              </Box>\n              :\n              <Box p={4} mb={3}>\n                <Heading.h3>NOTICE</Heading.h3>\n                <Text>\n                  Unable to connect to metamask, so unable to sign transactions.\n                </Text>\n              </Box>\n            }\n          </Card>\n        </Modal>\n        <Modal isOpen={this.state.modalState === ModalState.updateWebsiteUrl}>\n          <Card width={'420px'} p={0}>\n            <Button.Text\n              icononly\n              icon={'Close'}\n              color={'moon-gray'}\n              position={'absolute'}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={this.closeModal}\n            />\n            {(!!this.props.accounts[0] || this.state.connectedToInjectedWeb3) ?\n\n              <Box p={4} mb={3}>{\n                transactionProcessing ?\n                  <Fragment>\n                    <Heading.h3>Processing Transaction</Heading.h3>\n                    <p>{transactionStatus}</p>\n                    {!!txHash && <a href={'https://etherscan.io/tx/' + txHash} target=\"_blank\">View transaction on Ethersan</a>}\n                    {!txComplete && <Loader color=\"red\" size=\"80px\" />}\n                  </Fragment>\n                  :\n                  <Fragment>\n                    <Heading.h3>Update website url</Heading.h3>\n                    <Text>\n                      Don't forget to add http or https at the beginning\n                    </Text>\n                    <form className=\"pure-form pure-form-stacked\" onSubmit={this.handleSubmitOfWebsite}>\n                      <Input\n                        key='updateUrl'\n                        type='text'\n                        name='updateUrl'\n                        value={this.state.updateUrl || ''}\n                        // value={this.state.contractFunctions['newSettingValue'] || ''}\n                        // placeholder={`Amount to ${this.state.depositState ? 'add' : 'remove'}`}\n                        onChange={this.handleWebsiteInputChange}\n                        style={{ width: '100%' }}\n                      // startAdornment={<InputAdornment position=\"start\">ETH</InputAdornment>}\n                      />\n                      <br />\n                    </form>\n                    <TokenOverview />\n                  </Fragment>}\n              </Box>\n              :\n              <Box p={4} mb={3}>\n                <Heading.h3>NOTICE</Heading.h3>\n                <Text>\n                  Unable to connect to metamask, so unable to sign transactions.\n                </Text>\n              </Box>\n            }\n            {(!transactionProcessing) && <Flex px={4} py={3} borderTop={1} borderColor={'#E8E8E8'} justifyContent={'flex-end'}>\n              {/* <Button.Outline>Cancel</Button.Outline> In the future this could be for resetting the values or something*/}\n              <Button\n                mainColor='#7A7A7A' size=\"small\"\n                ml={3}\n                onClick={this.handleSubmitOfWebsite}\n              >Update Website Url</Button>\n            </Flex>}\n          </Card>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => {\n  return {\n    contracts: state.contracts,\n    transactions: state.transactions,\n    transactionStack: state.transactionStack,\n    accounts: state.accounts,\n  }\n}\n\nexport default connectTokenId(throttledDrizzelConnect(1000)(BuyModal, mapStateToProps))\n","import React, { useState, useRef } from 'react';\nimport { Buffer } from 'ipfs'\nimport { ToastMessage, Progress } from 'rimble-ui'\nimport { Heading, Text, } from 'rimble-ui'\nimport { add, pin } from '../lib/ipfs';\n\nconst UploadProgress = ({ image, uploadProgress: { progress, done, pinned } }) => {\n  const progPercent = (progress / image.ipfsDagSize) * 100\n  return <div>\n    {done ?\n      pinned ?\n        <React.Fragment>\n          <h1>Image is pinned to IPFS</h1>\n          <p>When the Ethereum transaction goes through your image should appear in its spot.</p>\n        </React.Fragment>\n        :\n        <React.Fragment>\n          <h1>Uploaded</h1>\n          <p>The data is on IPFS, but we are currently 'pinning' the data to make it last forever.</p>\n          <p>In the meantime you can add the IPFS hash to the smart contract.</p>\n        </React.Fragment>\n      :\n      <div>\n        {progPercent < 98 /*98 is a random number it must jus be quite high so this condition only triggers when waiting for ipfs at the end */ ?\n          <div>\n            <ToastMessage.Processing my={0} message={<div>\n              <Progress value={progPercent} />\n              <p>Uploading to IPFS</p>\n            </div>} />\n          </div>\n          :\n          <div>\n            <ToastMessage.Processing my={0} message={\"Verifying upload on IPFS\"} />\n            <p>Please be patient, decentralisation is still a bit slow unfortunately.</p>\n          </div>\n        }\n      </div>\n    }\n  </div>\n}\n\nconst UploadImage = ({ updateImageHashOnSmartContract }) => {\n\n  const [currentImage, setCurrentImage] = useState({ data: null, name: null, size: 0, ipfsDagSize: 0 })\n  const progressRef = useRef({ progress: 0, done: false })\n\n  const handleChangeImage = (evt) => {\n    var reader = new FileReader();\n    var file = evt.target.files[0];\n    const size = file.size\n    const name = file.name\n    const ipfsApproxDagSize = size * 1.335 // NOTE: This is a rough, and slight over estimate, will need to be calculated to be precise.\n\n\n    reader.onload = async (upload) => {\n      const data = upload.target.result\n      setCurrentImage({ data, size, ipfsDagSize: ipfsApproxDagSize })\n      // Set the progress to 100% for now since the code for the progress updates isn't working nicely.\n      //    See the 'NOTE' a few lines down. - When that is added, this line can be removed\n      progressRef.current = { progress: ipfsApproxDagSize, done: false }\n\n      // NOTE: this code gets the hash of the data without any network activity\n      // const multihashing = require('multihashing-async')\n      // const digest = await multihashing.digest(buf, 'sha1')\n      // const dataHash = await new Promise(\n      //   (resolve, reject) => multihashing(\n      //     Buffer.from(data),\n      //     'sha1',\n      //     (err, result) =>\n      //       resolve(\n      //         result.toString('hex')\n      //       )\n      //   )\n      // )\n      // NOTE: this method isn't supported by infura, but it would be useful to see if the file already exists on IPFS\n      // const getNumberOfProviders = await window.ipfsNode.dht.findProvs(dataHash, { timeout: 1000, maxNumProviders: 2 })\n\n      // console.log(data)\n      const result = await add(Buffer.from(data), name, '?pin=false')\n      // const result = await window.ipfsNode.add(\n      //   Buffer.from(data),\n      //   {\n      //     // // NOTE: this was removed because it was giving problems with infura (it would hang)\n      //     // progress: progress =>\n      //     //   progressRef.current = { progress, done: false },\n      //     pin: false, // Note: if all were good in the world this would be true, problem is that this is extremely slow and not user friendly!\n      //   },\n      // )\n      const ipfsHash = result.Hash\n      progressRef.current = { progress: ipfsApproxDagSize, done: true, ipfsHash, pinned: false }\n      updateImageHashOnSmartContract(ipfsHash)\n      // Try to pin the hash in the background!\n      const pinResult = await pin(ipfsHash)\n      progressRef.current = { progress: ipfsApproxDagSize, done: true, ipfsHash, pinned: true }\n    };\n    reader.readAsDataURL(file);\n  }\n\n  return (\n    <div>\n      <Heading.h3>Upload Image</Heading.h3>\n\n      {(!!currentImage.data) ?\n        <UploadProgress image={currentImage} uploadProgress={progressRef.current}></UploadProgress>\n        :\n        <React.Fragment>\n          <Text>\n            We recommend an optimal image dimesions of 300 x 300 pixels\n          </Text>\n          <input\n            type=\"file\" name=\"file\"\n            className=\"upload-file\"\n            id=\"file\"\n            onChange={handleChangeImage}\n            encType=\"multipart/form-data\"\n            required\n          />\n        </React.Fragment>\n      }\n    </div>\n  )\n}\n\nexport default UploadImage\n","import React, { Component, Fragment, useRef, useEffect } from 'react';\nimport TokenOverview from './TokenOverview';\nimport OfflineContainer from './Offline';\nimport BuyModal from './BuyModal';\nimport UpdateModal from './UpdateModal';\nimport PropTypes from 'prop-types';\nimport web3ProvideSwitcher from '../web3ProvideSwitcher';\n// import { UsdPriceProvider } from './USDPriceContext';\nimport { connectTokenId } from './TokenIdContext';\nimport throttledDrizzelConnect from './throttledDrizzelConnect';\nimport { cat } from '../lib/ipfs';\nimport { Hash } from 'crypto';\n// import Img from 'react-image'\n\nconst alternateBasicImage = (index: number) => () =>\n  <div className='image-container'>\n    {window.initialImageDetailsLoaded &&\n      <a href={`${window.initialImageDetails.urls[index]}?ref=alwaysforsale`}>\n        <img\n          src={window.rootCdnUrl + index}\n          style={{ width: '100%' }}\n        />\n      </a>\n    }\n  </div>\n\nconst throttleCreator = (limit: number) => {\n  let inThrottle = false\n  return function () {\n    if (!inThrottle) {\n      inThrottle = true\n      setTimeout(() => inThrottle = false, limit)\n      return true\n    }\n    return false\n  }\n}\nconst throttle = throttleCreator(1000)\nclass Dapp extends Component<any, any> {\n  contracts: any;\n  utils: any;\n  inputs: any;\n  state: any;\n\n  static contextTypes = {\n    drizzle: PropTypes.object\n  };\n\n  context: any;\n\n  constructor(props: any, context: any) {\n    super(props);\n    // const tokenId = 0;\n    // console.log(context.drizzle.contracts.VitalikSteward.methods.hashes.);\n    //console.log(context.drizzle.contracts['VitalikSteward']['hashes']['0x0']);\n    this.contracts = context.drizzle.contracts;\n    this.utils = context.drizzle.web3.utils;\n    this.context = context;\n\n    this.state = {\n      tokenOwner: '',\n      hasheKey: context.drizzle.contracts.VitalikSteward.methods.hashes.cacheCall(props.tokenId),\n      urlKey: context.drizzle.contracts.VitalikSteward.methods.urls.cacheCall(props.tokenId),\n      hash: null,\n      base64Image: '',\n      websiteUrl: '',\n      totalMonthRevenue: '',\n      hasStartedLoadingIpfsImage: false,\n      useUrlDirectly: false,\n    };\n  }\n\n  getBase64Image = async (hash: any) => {\n    // console.log('getting bas64 hash')\n\n    this.setState({\n      ...this.state,\n      hasStartedLoadingIpfsImage: true\n    })\n\n    // window.ipfsNode.cat(hash, async (err: any, data: any) => {\n    //   if (err) return console.error(err);\n\n    const data = await cat(hash)\n    const dataString = data.toString()\n    if (dataString.includes('data')) {\n      this.setState({\n        ...this.state,\n        base64Image: data.toString()\n      });\n    } else {\n      this.setState({\n        ...this.state,\n        useUrlDirectly: true\n      });\n      // var reader = new FileReader();\n      // const setStateThis = this.setState\n      // reader.readAsDataURL(data);\n      // reader.onloadend = function () {\n      //   var base64data = reader.result;\n      //   console.log(base64data);\n      //   setStateThis({\n      //     base64Image: data\n      //   });\n      // }\n      console.log('still not working sadly...')\n    }\n    // convert Buffer back to string\n    // console.log('converting image data into string', data, data.toString())\n    // })\n  };\n\n  calcTotalMonthRevenue = (ad1: number, ad2: number, ad3: number) => {\n    this.setState({ totalMonthRevenue: (ad1 + ad2 + ad3) })\n  }\n\n  async componentWillReceiveProps(nextProps: any) {\n    // console.log('here')\n\n    if (this.state.urlKey in this.props.contracts['VitalikSteward']['urls'] &&\n      this.state.urlKey in nextProps.contracts['VitalikSteward']['urls']\n    ) {\n      const urlNext =\n        nextProps.contracts['VitalikSteward']['urls'][\n          this.state.urlKey\n        ].value;\n\n      if (this.state.websiteUrl !== urlNext) {\n        this.setState({ ...this.state, websiteUrl: urlNext })\n      }\n    }\n\n    if (\n      this.state.hasheKey in\n      this.props.contracts['VitalikSteward']['hashes'] &&\n      this.state.hasheKey in\n      nextProps.contracts['VitalikSteward']['hashes']\n    ) {\n      const hashNext =\n        nextProps.contracts['VitalikSteward']['hashes'][\n          this.state.hasheKey\n        ].value;\n\n      // console.log('has next hash, checking if it is different:', hashNext)\n      if (this.state.hash !== hashNext) {\n        // console.log(\n        //   'this.state.hash !== hashNext',\n        //   this.state.hash !== hashNext,\n        //   'hashNext !== window.initialImageDetails.images[nextProps.tokenId]',\n        //   hashNext !== window.initialImageDetails.images[nextProps.tokenId],\n        //   'this.state.hasStartedLoadingIpfsImage',\n        //   this.state.hasStartedLoadingIpfsImage,\n        //   '!!window.ipfsNode',\n        //   !!window.ipfsNode,\n        //   'this.state.hasStartedLoadingIpfsImage',\n        //   this.state.hasStartedLoadingIpfsImage,\n        // )\n        // console.log('the next hash is::', hashNext)\n        // console.log('the next hash is::', hashNext)\n        // console.log('the next hash is::', hashNext)\n        // console.log('the next hash is::', hashNext)\n        if (\n          hashNext !== window.initialImageDetails.images[nextProps.tokenId]\n          || !this.state.hasStartedLoadingIpfsImage\n        ) {\n          this.getBase64Image(hashNext)\n        } else {\n          console.log('the ipfs hash won\\'t load this time')\n        }\n        // this.setState({ ...this.state, hash: 'QmSKefBekHMWMPWnYGPQBziGcJD3QtCuw977Dv8VXAJLtb' })\n        this.setState({ ...this.state, hash: hashNext })\n      } else if (!this.state.hasStartedLoadingIpfsImage) {\n        this.getBase64Image(hashNext)\n      }\n    }\n    // });\n    // this.setState({ ...this.state, hashes: newHashes });\n    const { tokenId } = nextProps;\n    const tokenOwnerKey = this.context.drizzle.contracts.ERC721Full.methods.ownerOf.cacheCall(\n      tokenId\n    );\n    const tokenOwnerObj =\n      nextProps.contracts['ERC721Full']['ownerOf'][tokenOwnerKey];\n\n    if (\n      !!tokenOwnerObj &&\n      !!tokenOwnerObj.value &&\n      this.state.tokenOwner !== tokenOwnerObj.value\n    ) {\n      this.setState({\n        ...this.state,\n        tokenOwner: tokenOwnerObj.value\n      });\n    }\n  }\n\n  // shouldComponentUpdate(nextProps: any, nextState: any) {\n  //   // console.log('should update?')\n  //   // return false\n  //   return throttle()\n  // }\n\n  render() {\n    const { tokenOwner } = this.state;\n    const { accounts, tokenId } = this.props;\n    const showDapp = web3ProvideSwitcher.providerInjected;\n    const isTokenOwner = tokenOwner === accounts[0];\n    // const displayPreloadedImages = window.initialImageDetailsLoaded\n    // const displayImage = !!this.state.base64Image //|| displayPreloadedImages\n    const imageSrc =\n      !!this.state.base64Image ?\n        this.state.base64Image\n        : this.state.useUrlDirectly ?\n          'https://cloudflare-ipfs.com/ipfs/' + this.state.hash\n          : ''\n    // const imageSrc = https://ipfs.infura.io:5001/api/v0/cat?arg=\n    // : window.initialImageDetailsLoaded ?\n    //   window.rootCdnUrl + tokenId : ''\n    // const altImgUrl = window.initialImageDetailsLoaded ?\n    //   window.rootCdnUrl + window.initialImageDetails.images[tokenId] : ''\n    const adLink = !!this.state.websiteUrl ? this.state.websiteUrl : /*displayPreloadedImages ? window.initialImageDetails.urls[tokenId] :*/ ''\n\n    // console.log('the image url:', imageUrl)\n    return (\n      <Fragment>\n        <OfflineContainer\n          alternateLoader={alternateBasicImage(tokenId)}>\n          <div className='image-container'>\n            <a href={`${adLink}?ref=alwaysforsale`}>\n              {(imageSrc !== '') ? ( //TODO undefined\n                <img\n                  src={imageSrc}\n                  style={{ width: '100%' }}\n                />\n              )\n                :\n                <div\n                  style={{ width: '100%' }}\n                >\n                  <img\n                    src={window.rootCdnUrl + this.props.tokenId}\n                    style={{ width: '100%' }}\n                  ></img>\n                </div>\n              }\n            </a>\n            {this.props.displayPurchase && (\n              <div className='interaction-button-container'>\n                <div className='interaction-buttons'>\n                  {isTokenOwner ? (\n                    <div>\n                      <Fragment>\n                        <UpdateModal />\n                        {/* <TokenOverview /> */}\n                      </Fragment>\n                    </div>\n                  ) : (\n                      <div>\n                        {showDapp ? (\n                          <BuyModal />\n                        ) : (\n                            <h3\n                              style={{\n                                margin: 0,\n                                color: '#6bad3e',\n                                padding: '0.8rem 1.2rem',\n                                display: 'inline-block'\n                              }}\n                            >\n                              Install <a href='https://metamask.io'>Metamask</a> to\n                              buy this ad space.\n                          {/* TODO: test if this is moblie and recommend a web3 app for android/iphone (eg trust-wallet)*/}\n                            </h3>\n                          )}\n                        <TokenOverview />\n                      </div>\n                    )}\n                </div>\n              </div>\n            )}\n          </div>\n        </OfflineContainer>\n      </Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => {\n  return {\n    contracts: state.contracts,\n    accounts: state.accounts\n  };\n};\n\n// const throttle = throttleCreator(1000);\n// const TransparentComponent = React.memo((props) => <Dapp {...props}></Dapp>, throttle);\n// const AnotherWrapper = (props: any) => <TransparentComponent {...props}></TransparentComponent>\nconst DappConnected = connectTokenId(throttledDrizzelConnect(1000)(Dapp, mapStateToProps));\n\nclass DappWrapper extends Component<any, any> {\n  constructor(props: any, context: any) {\n    super(props);\n  }\n\n  render() {\n    return (\n      // <UsdPriceProvider>\n      <OfflineContainer alternateLoader={alternateBasicImage(this.props.tokenId)}>\n        <DappConnected displayPurchase={this.props.displayPurchase} tokenId={this.props.tokenId} />\n        {/* <DappConnected throttle={throttleCreator(1000)} displayPurchase={this.props.displayPurchase} tokenId={this.props.tokenId} /> */}\n      </OfflineContainer>\n      // </UsdPriceProvider>\n    );\n  }\n}\n\nexport default DappWrapper;\n","import React, { Fragment } from 'react';\nimport { Modal, Button, Card, Box, Flex } from 'rimble-ui';\n\n\nclass About extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOpen: false\n        };\n        this.closeModal = this.closeModal.bind(this);\n        this.openModal = this.openModal.bind(this);\n    }\n\n    closeModal(e) {\n        e.preventDefault();\n        this.setState((state, props) => ({\n            isOpen: false\n        }));\n    }\n\n    openModal(e) {\n        e.preventDefault();\n        this.setState((state, props) => ({\n            isOpen: true\n        }));\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <Button onClick={this.openModal} mainColor='#7A7A7A' size=\"small\" className='information-button'>About</Button>\n\n                <Modal isOpen={this.state.isOpen} style={{transform: 'translate(0, -1000px)'}} className='test'>\n                    <Card width={\"60vw\"} p={0}>\n                        <Button.Text\n                            icononly\n                            icon={\"Close\"}\n                            color={\"moon-gray\"}\n                            position={\"absolute\"}\n                            top={0}\n                            right={0}\n                            mt={3}\n                            mr={3}\n                            onClick={this.closeModal}\n                        />\n\n                        <Box p={4} mb={3} className='scrollable-content'>\n                            <Fragment>\n                                <h1>About our always for sale adspace</h1>\n                                <p>\n                                    This project was created at the #ETHIndia2019 hackathon. The purpose of the project is two fold:\n      </p>\n                                <p>\n                                    1. To generate funds for wildlife conservation. How? We created a\n                                    project called wildcards.world at the #ETHCapeTown2019 hackathon to\n                                    raise funds for wildlife conservation. Subsequently, we were accepted into a\n                                    6 month blockchain incubator in Paris to accelerate the developement of\n                                    this platform. The funds generated from our #ETHIndia 'always for sale\n                                    adspace' will provide funding for us to develop our <a href='https://wildcards.world'>wildcards</a> project and\n                                    hence raise funds for conservation efforts.\n      </p>\n                                <p>\n                                    2. This project is a continued social experiment to understand how\n                                    always for sale adspace might behave in a viral marketplace. Many of you\n                may be familiar with the <a href='http://www.milliondollarhomepage.com'>milliondollarhomepage</a> and how this simple\n                                    project sold a million pixels at a dollar each. This rather aims at scarcity and introduces a very interesting concept\n                                    where each piece of marketing real estate will be always for sale,\n                                    forever.\n      </p>\n                                <p>\n                                    The success of this project will allow us to provide always for sale\n                                    plugin marketing solutions to other companies and continue to fund the\n                                    developement of wildcards - the exploration of sustainable solutions\n                                    using an always for sale mechanic.\n      </p>\n                                <p>\n                                    Join our <a href='https://t.me/wildcardsworld'>telegram</a> <br/> \n                                    Email us to chat:&nbsp;\n                                    <a href='jonjon@wildcards.world'>jonjon@wildcards.world</a>\n      </p>\n                                <p>Made by Denham Preen, JonJon Clark and Jason Smythe</p>\n                                <p>Version: 1.0.1</p>\n                            </Fragment>\n                        </Box>\n\n                        <Flex\n                            px={4}\n                            py={3}\n                            borderTop={1}\n                            borderColor={\"#E8E8E8\"}\n                            justifyContent={\"flex-end\"}\n                        >\n                            <Button.Outline onClick={this.closeModal} mainColor='#7A7A7A' size=\"small\">Close</Button.Outline>\n                        </Flex>\n                    </Card>\n                </Modal>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default About;\n","import React, { Fragment } from 'react';\nimport { Modal, Button, Card, Box, Flex } from 'rimble-ui';\n\nclass HowItWorks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false\n    };\n    this.closeModal = this.closeModal.bind(this);\n    this.openModal = this.openModal.bind(this);\n  }\n\n  closeModal(e) {\n    e.preventDefault();\n    this.setState((state, props) => ({\n      isOpen: false\n    }));\n  }\n\n  openModal(e) {\n    e.preventDefault();\n    this.setState((state, props) => ({\n      isOpen: true\n    }));\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Button onClick={this.openModal} mainColor='#7A7A7A' size=\"small\">How it works?</Button>\n\n        <Modal isOpen={this.state.isOpen}>\n          <Card width={'60vw'} p={0}>\n            <Button.Text\n              icononly\n              icon={'Close'}\n              color={'moon-gray'}\n              position={'absolute'}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={this.closeModal}\n            />\n\n            <Box p={4} mb={3} className='scrollable-content'>\n              <Fragment>\n                <h1>How it works?</h1>\n                <p>\n                  1. Log onto our website and a grid showing all 3 advertising\n                  blocks will be displayed.\n                </p>\n                <p>2. All 3 of these blocks will be always on sale… forever.</p>\n                <p>\n                  3. Simply click buy on the block you would like to purchase\n                  (you will need metamask and small amount of ether):\n                </p>\n                <p>\n                  4. Set the the selling price for your block (this allows our\n                  blocks to be always for sale. If you set the selling price at\n                  say 2 ETH, you will receive 2 ETH if someone buys this block\n                  from you - making money while advertising, pretty neat right?)\n                </p>\n                <p>\n                  5. Add a deposit in ETH to pay for owning the space. If you\n                  set the selling price at 2 ETH, you will have to pay 2 ETH per\n                  month in order to keep this ad space. (The funds generated\n                  from this project are going towards funding our wildcards\n                  project which in turn funds conservation. We got into a 6\n                  month Paris blockchain incubator, but we need to self fund.)\n                </p>\n                <p>\n                  6. Now you own the block congrats! If you refresh the page you\n                  will be allowed to upload a logo of your company and add your\n                  website link. Anyone who visits the webpage will now see you\n                  company displayed in that block, until someone buys that block\n                  from you, or your deposit runs out.\n                </p>\n              </Fragment>\n            </Box>\n\n            <Flex\n              px={4}\n              py={3}\n              borderTop={1}\n              borderColor={'#E8E8E8'}\n              justifyContent={'flex-end'}\n            >\n              <Button.Outline mainColor='#7A7A7A' size=\"small\" onClick={this.closeModal}>Close</Button.Outline>\n            </Flex>\n          </Card>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default HowItWorks;\n","import React, { createContext, useContext, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const PreloadImageContext = createContext<any>('');\n\ninterface ProviderProps {\n  children: any,//React.Component\n}\n\nexport const PreloadImageProvider: React.FunctionComponent<ProviderProps> = ({ children }) => {\n  const isLoaded = useRef(window.initialImageDetailsLoaded);\n\n  useEffect(\n    () => {\n      isLoaded.current = window.initialImageDetailsLoaded\n    },\n    [window.initialImageDetailsLoaded]\n  );\n  return <PreloadImageContext.Provider value={{ isLoaded: isLoaded.current, anotherValue: 'test' }}>\n    {children}\n  </PreloadImageContext.Provider>\n};\n\nPreloadImageProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const usePreloadImage = () => useContext(PreloadImageContext);\n\nexport const connectPreloadImage = (WrappedComponent: any) => {\n  return (props: any) => {\n    const preloadImage = usePreloadImage()\n    const newProps = { ...props, preloadImage }\n    return <WrappedComponent {...newProps} />\n  }\n}\n","import React, { Component } from \"react\"\nimport PropTypes from 'prop-types'\nimport ToggleButton from 'react-toggle-button'\nimport Dapp from \"./Dapp\"\nimport About from './About'\nimport HowItWorks from './HowItworks'\nimport { TokenIdProvider } from \"./TokenIdContext\"\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.min.css'\n// import { UsdPriceProvider } from './USDPriceContext';\nimport { PreloadImageProvider, connectPreloadImage } from \"./PreloadedImageContext\";\nimport OfflineContainer from \"./Offline\"\nimport Web3Connect from \"web3connect\"\nimport Web3 from \"web3\"\nimport web3ProvideSwitcher from \"../web3ProvideSwitcher\"\n\ntype displayPurchaseState = {\n  displayPurchase: boolean,\n};\n\ndeclare global {\n  interface Window { web3: any; }\n}\n\n// window.ipfsNode = window.ipfsNode || {};\n\nclass TotalRaised extends Component<any, displayPurchaseState> {\n  state: any\n\n  static contextTypes = {\n    drizzle: PropTypes.object\n  };\n\n  constructor(props: any, context: any) {\n    super(props)\n\n    this.state = {\n      pricesSet: false,\n      prices: [0, 0, 0]\n    };\n  }\n  async componentDidMount() {\n    if (!this.context.drizzle || this.state.pricesSet) return\n\n\n    const { web3: { utils }, contracts } = this.context.drizzle\n    const prices = await Promise.all(this.state.prices.map(async (_: any, i: any) => {\n      const foreclosedPromise = contracts.VitalikSteward.methods.foreclosed(i).call()\n      const price: any = await contracts.VitalikSteward.methods.price(i).call()\n      const foreclosed = await foreclosedPromise\n\n      return (foreclosed) ?\n        0 : parseFloat(utils.fromWei(new utils.BN(price), 'ether').toString())\n    }))\n    this.setState({\n      ...this.state,\n      prices,\n      pricesSet: true\n    })\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.state.pricesSet &&\n          <h4 style={{ color: 'white', textAlign: 'center' }}>This homepage is currently in line to make {this.state.prices.reduce((tot: number, num: number) => tot + num).toFixed(4)} ETH per month based on current ad space prices</h4>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Template extends Component<any, displayPurchaseState> {\n  state: any\n\n  constructor(props: any, context: any) {\n    super(props)\n\n    this.state = {\n      displayPurchase: false,\n      displayToggle: false\n    };\n  }\n  async componentWillMount() {\n    if (!this.props.drizzleLoaded) {\n      toast.info(\"Our contracts are bullet proof and our frontend is being improved to match it too\", {\n        position: \"top-right\",\n        autoClose: 6000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      setTimeout(() => {\n        toast.info(\"We are on the crisp chat below please message us with any questions\");\n      }, 6400)\n    }\n  }\n  async componentDidUpdate() {\n    console.log('using injected web3', web3ProvideSwitcher.usingInjectedWeb3)\n    if (web3ProvideSwitcher.usingInjectedWeb3 !== this.state.displayToggle) {\n      const result = await web3ProvideSwitcher.switchToInjectedWeb3()\n      console.log('using injected web3', result)\n      this.setState({\n        ...this.state,\n        displayToggle: result\n      })\n    }\n  }\n\n  render() {\n    const drizzleLoaded = this.props.drizzleLoaded\n    const imageDataLoaded = window.initialImageDetailsLoaded\n\n    return (\n      <div>\n\n        <header>\n          <ToastContainer />\n          <h1>\n            These ads are always for sale, purchase the ad space and set your own monthly payment...\n            <br /> even make a profit when someone buys the ad space from you\n            </h1>\n          {drizzleLoaded && <React.Fragment>\n            {this.state.displayToggle ?\n              <React.Fragment>\n                <ToggleButton\n                  value={this.state.displayPurchase || false}\n                  onToggle={() => {\n                    this.setState({\n                      displayPurchase: !this.state.displayPurchase,\n                    })\n                  }} />\n                <label>\n                  <span style={{ color: 'white' }}>Click toggle to buy ad</span>\n                </label>\n              </React.Fragment>\n              :\n              // <label style={{ maxWidth: '100px' }}>\n              //   <span style={{ color: 'white' }}>To buy please use a web3 enabled browser. For example use the <a href=\"https://metamask.io\">MetaMask browser extension</a></span>\n              // </label>\n              <Web3Connect.Button\n                providerOptions={{\n                  portis: {\n                    id: '104b9d07-25d3-4aeb-903b-ad7452218d05',\n                    network: \"mainnet\"\n                  },\n                  fortmatic: {\n                    key: 'pk_live_BE64CE1BB4A49C37',\n                    network: \"mainnet\"\n                  }\n                }}\n                onConnect={(provider: any) => {\n                  console.log(provider)\n                  web3ProvideSwitcher.useExternalWeb3(provider)\n                  this.setState({\n                    ...this.state,\n                    displayToggle: true\n                  })\n                }}\n                onClose={() => {\n                  console.log(\"Web3Connect Modal Closed\"); // modal has closed\n                }}\n              />\n            }\n          </React.Fragment>}\n\n        </header>\n\n        <div className=\"Grid\">\n          {/* <UsdPriceProvider> */}\n          {([0, 1, 2]).map(i => <div key={i} className=\"Grid-item\">\n            {drizzleLoaded ?\n              <TokenIdProvider tokenId={i}>\n                <Dapp displayPurchase={this.state.displayPurchase} tokenId={i} />\n              </TokenIdProvider>\n              :\n              <div className='image-container'>\n                <div\n                  style={{ width: '100%' }}\n                >\n                  <a href={`${imageDataLoaded ? window.initialImageDetails.urls[i] : '_'}?ref=alwaysforsale`}>\n                    <img\n                      src={window.rootCdnUrl + i}\n                      style={{ width: '100%' }}\n                    ></img>\n                  </a>\n                </div>\n              </div>\n            }\n          </div>)}\n          {/* </UsdPriceProvider> */}\n        </div>\n        <footer>\n          <div className='socials'>\n            <div\n              className='fb-share-button'\n              data-href='http://alwaysforsale.io'\n              data-layout='button'\n              data-size='small'\n            >\n              <a\n                target='_blank'\n                href='https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Falwaysforsale.io%2F&amp;src=sdkpreparse'\n                className='fb-xfbml-parse-ignore'\n              >\n                Share\n              </a>\n            </div>\n            <div>\n              <a\n                href='https://twitter.com/intent/tweet?button_hashtag=Alwaysforsale.io&ref_src=twsrc%5Etfw'\n                className='twitter-hashtag-button'\n                data-show-count='false'\n              >\n                Tweet #Alwaysforsale\n              </a>\n            </div>\n          </div>\n          <div className='more-info'>\n            <About />\n            <br />\n            <HowItWorks />\n          </div>\n        </footer>\n        {drizzleLoaded && <OfflineContainer alternateLoader={React.Fragment}>\n          <TotalRaised />\n        </OfflineContainer>\n        }\n      </div>\n    );\n  }\n}\n\nconst InnerComponent = connectPreloadImage(Template)\n\nexport default (props: any) => {\n  return <PreloadImageProvider>\n    <InnerComponent {...props} />\n  </PreloadImageProvider>;\n}\n","import React, { Component, Suspense } from \"react\";\n\n// import DrizzleProvider from \"./DrizzelProvider\";\nimport Template from \"./components/Template\";\n\nimport './app.css'\nimport UploadImage from \"./components/UploadImage\";\n\nconst DrizzleProvider = React.lazy(() => import('./DrizzleProvider'));\n\nclass App extends Component {\n  render() {\n    return (\n      <Suspense fallback={<Template drizzleLoaded={false} />}>\n        <DrizzleProvider>\n          <Template drizzleLoaded={true} />\n        </DrizzleProvider>\n      </Suspense>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AppRoutes from './App';\n\nReactDOM.render(<AppRoutes />, document.getElementById('root'));\n"],"sourceRoot":""}